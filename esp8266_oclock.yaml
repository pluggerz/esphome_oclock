esphome:
  name: oclock
  platform: ESP8266
  board: nodemcuv2
  esp8266_restore_from_flash: true

#debug:

# Enable logging ( and disable for UART )
logger:
  baud_rate: 0
  level: INFO # VERY_VERBOSE #INFO
  
# Enable Home Assistant API
api:
  password: !secret api_password 

ota:
  password: !secret ota_password
  
wifi:
   ssid: !secret wifi_ssid
   password: !secret wifi_password

time:
  - platform: homeassistant
    id: hass_time

captive_portal:

external_components:
  - source:
      type: git
      url: https://github.com/pluggerz/esphome_oclock.git
#      type: local
#      path: /Users/birdie/Git/esphome_oclock/components
    refresh: 0min

#demo:
#  lights:
#    - name: "DemodB Light"
#      type: "2"
      
number:
  - platform: template
    name: "Template number"
    optimistic: true
    min_value: 0
    max_value: 100
    step: 1
  - platform: template
    id: brightness_id
    # value->pow(2, 5 * value / max_value)-1: for max_value=5 0->0, 1->1, 2->3, 3->7, 4->15, 5->31
    name: 'Brightness'
    icon: 'mdi:brightness-7'
    optimistic: true
    min_value: 0
    max_value: 5 
    step: 1
    initial: 5

light:
  - platform: rgb
    name: "Background Solid Color "
    red: red_id
    green: green_id
    blue: blue_id
    restore_mode: RESTORE_DEFAULT_ON

select: # how to include from the code !?
  - platform: template
    name: "Select Platform Template" # try to move inside the code?
    optimistic: true
    restore_value: true
    options:
      - one
      - two
      - three
    initial_option: two


switch:
  - platform: restart
    name: "Restart Master"
  - platform: template
    name: "Template Switch"
    restore_state: true
    optimistic: true
  - platform: gpio
    name: "PCF8574 Pin #1"
    pin:
      pcf8574: pcf8574_hub
      number: 1
      mode:
        output: true
      inverted: false
  - platform: gpio
    name: "PCF8574 Pin #3"
    pin:
      pcf8574: pcf8574_hub
      number: 3
      mode:
        output: true
      inverted: false
  - platform: gpio
    name: "PCF8574 Pin #5"
    pin:
      pcf8574: pcf8574_hub
      number: 5
      mode:
        output: true
      inverted: false
  - platform: gpio
    name: "PCF8574 Pin #7"
    pin:
      pcf8574: pcf8574_hub
      number: 7
      mode:
        output: true
      inverted: false


binary_sensor:
  - platform: gpio
    name: "PCF8574 Pin #0"
    pin:
      pcf8574: pcf8574_hub
      number: 0
      mode:
        input: true
      inverted: true
  - platform: gpio
    name: "PCF8574 Pin #2"
    pin:
      pcf8574: pcf8574_hub
      number: 2
      mode:
        input: true
      inverted: true
  - platform: gpio
    name: "PCF8574 Pin #4"
    pin:
      pcf8574: pcf8574_hub
      number: 4
      mode:
        input: true
      inverted: true      
  - platform: gpio
    name: "PCF8574 Pin #6"
    pin:
      pcf8574: pcf8574_hub
      number: 6
      mode:
        input: true
      inverted: true

      

oclock:
  count_start: -1 # default is -1
  time_id: hass_time
  slaves:
    "*":
      H0: 608  
      H1: -628
    S0: 20 #20
    S1: 22 #22
  light:
    red:
      id: red_id
    green:
      id: green_id
    blue:
      id: blue_id
    brightness:
      id: brightness_id
      